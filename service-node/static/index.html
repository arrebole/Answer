<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>add problemset</title>
    <style>
        .header {
            font-size: 20px;
        }
    </style>
</head>

<body>
    <div id="app">
        <section class="header">
            题目: <input type="text" name="topic" id="topic">
            答案: <input type="text" name="solution" id="solution" value="a">
        </section>

        <hr>
        <section>
            选项A: <input type="text" name="optionA" id="optionA">

            选项A: <input type="text" name="optionB" id="optionB">

            选项A: <input type="text" name="optionC" id="optionC">

            选项A: <input type="text" name="optionD" id="optionD">
        </section>
        <button type="submit" id="submit">提交</button>
    </div>
    <script>

        function getText(arg) {
            return document.getElementById(arg).value;
        }

        function extractData() {
            return {
                topic: getText("topic"),
                solution: getText("solution"),
                optionA: getText("optionA"),
                optionB: getText("optionB"),
                optionC: getText("optionC"),
                optionD: getText("optionD"),
            }
        }

        function creatcFetch(data) {
            return fetch("/api/problemset/add", {
                method: "POST",
                body: JSON.stringify(data),
                headers: new Headers({
                    'Content-Type': 'application/json'
                })
            })
                .then(res => res.json())
        }

        // 提交数据
        document.getElementById("submit").onclick = () => {
           console.log(extractData());
            creatcFetch(extractData()).then(data => {
                if(data["code"] == "success"){
                    alert("success");
                    window.location.reload();
                }else{
                    alert("fail");
                }
            })

        }

    </script>
</body>

</html>